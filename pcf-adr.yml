asyncapi: 3.0.0
id: urn:pcf-adr
info:
  title: PCF ADR
  version: 1.4.0
defaultContentType: application/json

servers:
  external-1:
    host: 'localhost:19092'
    protocol: kafka

operations:
  publishADR:
    action: send
    channel:
      $ref: '#/channels/pcfADR'

channels:
  pcfADR:
    address: pcfADR
    messages:
      ADR:
        title: Activity Data Record
        summary: An information record about an activity performed in the system for a user equipment (UE) - a device used directly by an end-user to communicate.
        description: >
          <details>
          <summary><u>ADR and LDR context:</u></summary>
          <b>LDR (Local Data Record)</b> is a local record created by an activity that occurs in the system with all the information arising from that activity. Contains a large amount of information in order to include resubmissions for correction and cancellation of actions, but also for diagnostic purposes.
          <br>
          Some activities may generate a sequence of LDRs due to event updates during the activity (<b>session scenarios</b>). When an update is required, if the activity's last LDR was not yet published, this LDR is modified with the event's information. If it was already published, a new LDR is created with the event's information and the context of the last LDR.
          <br>
          Each system participates in diverse <b>business processes</b> with multiple activities (process = Î£ activities). Since each activity generates one or more LDRs, different LDRs created by different systems are enforced to be correwtf, nem lative to group LDRs from the same business process.
          <p>
          <b>ADR (Activity Data Record)</b> is a LDR conversion. It is generated from one LDR and published externally, for third-party systems. While LDRs are hardcoded in the own system (non-parameterizable), the structure of ADRs is decided by parameterization, via OMS (Operational & Maintenance System), with versioning.
          <br>
          Depending on the <b>ADR type/scenario</b>, some fields may be absent or optional. There are multiple types of ADRs, commonly grouped as follows:
          <ul>
          <li> <b>service</b> ADRs, which include <code>SMPolicyControl</code>, <code>PolicyAuthorization</code>, and <code>Charging</code> activities;
          <li> <b>provision</b> ADRs, which includes <code>AccountManagement</code>, <code>ProductManagement</code>, and <code>BucketManagement</code> activities; and
          <li> <b>top-up</b> ADRs.
          </ul>
          In terms of scenarios, there are two:
          <ul>
          <li> <b>single event</b> scenarios, which include <code>Unique</code> events (e.g., <b>provision</b> ADRs, <b>top-up</b> ADRs); and
          <li> <b>session</b> scenarios, which include <code>Initial</code>, <code>Intermediate</code>, and <code>Final</code> events (e.g., <b>service</b> ADRs).
          </ul>
          </details>
        externalDocs:
          description: Wiki - PCF ADR Specification
          url: https://wiki.ptin.corppt.com/display/PCFKERNEL/PCF+ADR+Specification+1.2
        headers:
          type: object
          properties:
            producerId:
              description: Producer Id
              type: string
            recordTypeId:
              description: Recorder Type Id
              type: string
            timestamp:
              description: Date
              type: string
              format: date-time
            validity:
              description: Validity
              type: integer
              format: int32
              minimum: 0
        payload:
          type: object
          description: An ADR message.
          additionalProperties: false
          required:
          - id
          - systemId
          - version
          - creationTs
          - activityType
          - activitySubType
          - activityStartTs
          - activityBusinessResult
          dependencies:
            activitySubType:
              oneOf:
              - title: AccountManagement ADR
                properties:
                  activityType:
                    const: "AccountManagement"
                  activitySubType:
                    enum: ['CreateAccount', 'UpdateAccount', 'RemoveAccount']
              - title: ProductManagement ADR
                properties:
                  activityType:
                    const: "ProductManagement"
                  activitySubType:
                    enum: ['CreateProduct', 'UpdateProduct', 'RemoveProduct']
              - title: BucketManagement ADR
                properties:
                  activityType:
                    const: "BucketManagement"
                  activitySubType:
                    enum: ['CreditBucket', 'DebitBucket', 'CreditSlice', 'DebitSlice', 'AdjustValiditySlice', 'UpdateSlice', 'RemoveSlice']
              - title: Policy ADR
                properties:
                  activityType:
                    const: "SMPolicyControl"
                  activitySubType:
                    enum: ['SMPolicyControl']
              - title: PolicyAuthorization ADR
                properties:
                  activityType:
                    const: "PolicyAuthorization"
                  activitySubType:
                    enum: ['PolicyAuthorization']
              - title: SpendingLimit ADR
                properties:
                  activityType:
                    const: "SpendingLimit"
                  activitySubType:
                    enum: ['SpendingLimit']
            notifications:
              required: ['version']
              properties:
                version:
                  type: string
                  const: "1.2"
          properties:
            id:
              type: string
              format: uuid
              description: >
                Unique identifier of the ADR.
                <p>
                _Developer Note:_ It is coincident to the source LDR identifier.
            systemId:
              type: string
              description: System identifier. Useful on deployments, where there are multiple systems.
              examples:
              - MEOPCF
            version:
              type: string
              pattern: ^\d+\.\d+$
              description: >
                ADR global _Specification_ version, in the format: `<Major>.<minor>`.\

                When there are changes that do not break backward compatibility, the **minor** version will be increased, otherwise, the **Major**  version will be increased.
            creationTs:
              type: string
              description: >
                LDR creation timestamp.
                <p>
                _Note:_ <u>Not</u> the publish timestamp, <u>nor</u> the LDR to ADR transformation timestamp.
              format: UTCZ
            correlationId:
              type: string
              description: >
                Identifier to associate this ADR with other ADRs from other activities but same business process. This enables two ADRs from the same business process, but produced asynchronously in different activities/systems, to be associated.
                <p>
                _Example:_ When the ASM receives a request for a provision activity, it has to create an LDR with a `correlationId` and propagate that to the CCS and PCF systems. These systems will then create their own LDRs with the same `correlationId`.
            productId:
              type: string
              description: >
                Identifier of the product that was subscribed (also known as agreement in 4th Gen.).

                This subscription may have been made to a complementary product.
            productOfferingId:
              type: string
              description: Identifier of the commercial offer template that originated the product subscribed.
            productAccountId:
              type: string
              description: Account that contains the product of the activity.
            productAccountTimeZone:
              type: string
              pattern: ^[+-]\d{2}:\d{2}$
              description: Timezone associated to the product's account.
              examples:
              - +00:00
            billingAccountId:
              type: string
              description: >
                The billing account identifier related to the activity. Specific for billing purposes only where an hierarchical structure of accounts is needed.
                <p>
                _Example:_ When a set of accounts are connected to a reseller account (meaning that every account, including the reseller account, has the `billingAccountId` equal to the reseller account identifier) the billing is unified on a single invoice belonging to the reseller account.
            protocolSessionId:
              type: string
              description: Protocol network session identifier.
            technicalCommunicationId:
              type: string
              description: Technical identifier of the UE (e.g., MSISDN, IMSI, etc.) that used the service. <u>Only required</u> in **service activity** records.\

                This allows the service request to be associated with the _Top-level_ set responsible for processing it. If `communicationProducts` is present, this should match one of the `communicationProducts[].id` values.
                <p>
                _Note:_ The way to obtain the value of this attribute must be deterministic and explicitly configured in the TC (at the _Service Criteria_ level).
              examples:
              - "960000001"
            communicationProducts:
              description: Public identifiers of the communication devices (UEs) with the product subscription. <u>Required</u> in **provision** records, but <u>optional</u> in **service activity** records.
              type: array
              items:
                $ref: '#/components/schemas/CommunicationProduct'
            activityId:
              type: string
              description: >
                Activity identifier, generally. This field is used to associate segments of the same activity.

                - In **session** scenarios, it is the service session identifier.

                - In **single event** scenarios, it is the event identifier.
            activityType:
              type: string
              description: Describes the activity performed.
              enum:
                - AccountManagement
                - ProductManagement
                - SMPolicyControl
                - PolicyAuthorization
                - SpendingLimit
            activitySubType:
              type: string
              description: Describes the nature of the activity type. The values allowed <u>depend</u> on the `activityType` value.
              examples:
                - CreateAccount
                - RemoveProduct
                - CreditBucket
                - DebitSlice
            activityStartTs:
              type: string
              format: UTCZ
              description: >
                Activity start timestamp (entire session).

                - In **session** scenarios, it is the beginning of the session. `Intermediate` events in a session (due to limit of consumption, time, or events) fill this field with the timestamp at the beginning of the session.

                - In **single event** scenarios, it is the instant associated with the event.
            activityEndTs:
              type: string
              format: UTCZ
              description: >
                Activity end timestamp. This field is only filled in the last segment of this activity.

                - In **session** scenarios, it is the end of the session. `Intermediate` events in a session <u>do not fill</u> in this field.

                - In **single event** scenarios, it is the instant associated with the event (i.e. equal to `activityStartTs`).
            activityTimeZone:
              type: string
              pattern: ^[+-]\d{2}:\d{2}$
              description: Timezone associated to the activity.
              examples:
              - +00:00
            activityBusinessResult:
              type: object
              description: Business result of the reported activity.
              required:
              - code
              - classification
              properties:
                code:
                  type: string
                  description: Activity result code.
                  examples:
                  - OK
                  - NOK
                  - SPEC_NOT_FOUND
                  - ACCOUNT_NOT_FOUND
                classification:
                  type: string
                  description: Activity result category.
                  enum:
                  - SUCCESS
                  - CLIENT_ERROR
            segmentNumber:
              type: integer
              minimum: 1
              description: >
                Index for the part (segment) of the activity to which the ADR refers. Important for **session** scenarios, where there is a sequence of ADRs for the same activity.
            segmentStartTs:
              type: string
              format: UTCZ
              description: >
                Timestamp of the activity associated with the beginning of the segment.

                - In **session** scenarios, it is the instant associated with the beginning of the segment. At the beginning of the session (`Initial` event), it is equal to `activityStartTs`.

                - In **single event** scenarios, it is the instant associated with the event (i.e. equal to `activityStartTs` and `activityEndTs`).
            segmentEndTs:
              type: string
              format: UTCZ
              description: >
                Timestamp of the activity associated with the end of the segment.

                - In **session** scenarios, it is the instant associated with the end of the segment. At the end of the session (`Final` event), it is equal to `activityEndTs`.

                - In **single event** scenarios, it is the instant associated with the event (i.e. equal to `activityStartTs` and `activityEndTs`).
            provisioning:
              $ref: '#/components/schemas/Provisioning'
            smPolicyControl:
              $ref: '#/components/schemas/SMPolicyControl'
            policyAuthorization:
              $ref: '#/components/schemas/PolicyAuthorization'
            notifications:
              type: array
              description: _Notifications_ that were sent due to the activation of one or more _Notification Plans_.
              items:
                $ref: '#/components/schemas/Notification'
        examples:
        - payload:
            id: 2143ae4a-8f91-11ee-b9d1-0242ac120002
            systemId: MEOPCF
            version: "1.1"
            creationTs: "2023-11-21T17:32:28.000Z"
            correlationId: corr-40710e14-8f16-11ee-b9d1-0242ac120002
            productId: product-7463524
            productOfferingId: 188c66ee-8f18-11ee-b9d1-0242ac120002
            productAccountId: ACC-12345
            productAccountTimeZone: +00:00
            billingAccountId: bill-acc-983625
            protocolSessionId: Session-706ba8fc-f82d-48e7-84dd-af34127250c6
            technicalCommunicationId: "960000001"
            communicationProducts:
            - id: "960000001"
              type: MOBILE
            activityId: Req-bce51c6a-8f16-11ee-b9d1-0242ac120002
            activityType: ProductManagement
            activitySubType: CreateProduct
            activityStartTs: "2023-11-21T17:32:28.000Z"
            activityEndTs: "2023-11-21T17:32:28.000Z"
            activityTimeZone: +00:00
            activityBusinessResult:
              code: OK
              classification: SUCCESS
            segmentNumber: 1
            segmentStartTs: "2023-11-21T17:32:28.000Z"
            segmentEndTs: "2023-11-21T17:32:28.000Z"
            provisioning:
              channel: Shop
              subChannel: Web
              reason:
                code: CLIENT
                description: Customer request
              items:
              - operation: Create
                type: Account
                entity:
                  id: 8a1baff3-d8a4-4330-95c6-744b7e6b9493
                  accountId: acc-12345
                  productOffering: f1200364-8f20-11ee-b9d1-0242ac120002
                  productCharacteristics:
                  - name: offer
                    value: Postpaid
                  - name: User
                    value: John
                  communicationProducts:
                  - id: "960000001"
                    type: mobile
            smPolicyControl:
              sessionPart:
              - sessionPolicies:
                - id: tl-123465
                  specId: 12e1a82c-4feb-4a57-aa78-3b700e0d5623
                  eligibilityPlans:
                  - specId: 81455de9-46f8-4991-8f09-ff55eaa97039
                    resultSpecId: 47761961-08ec-40b3-807f-5777a5d92c33
                  sessionPlans:
                  - specId: 81455de9-46f8-4991-8f09-ff55eaa97039
                    resultSpecIds:
                    - 47761961-08ec-40b3-807f-5777a5d92c33
                  notificationPlans:
                  - specId: 81455de9-46f8-4991-8f09-ff55eaa97039
                    resultSpecIds:
                    - 47761961-08ec-40b3-807f-5777a5d92c33
                servicePolicies:
                - id: tl-123465
                  specId: 12e1a82c-4feb-4a57-aa78-3b700e0d5623
                  servicePlans:
                  - specId: 81455de9-46f8-4991-8f09-ff55eaa97039
                    resultSpecIds:
                    - 47761961-08ec-40b3-807f-5777a5d92c33
                  notificationPlans:
                  - specId: 81455de9-46f8-4991-8f09-ff55eaa97039
                    resultSpecIds:
                    - 47761961-08ec-40b3-807f-5777a5d92c33
                appliedEligibility:
                  result: true
                  reason: AUTHORIZED
                appliedPCCRules:
                - specId: 04bb4505-e880-496e-8aeb-260ff5728575
                appliedSessionRules:
                - specId: 04bb4505-e880-496e-8aeb-260ff5728575
                policyCounters:
                - id: counter-12345
                  value: "100"

components:
  schemas:
    CommunicationProduct:
      type: object
      description: Public communication device (UE) with the product subscription.
      properties:
        id:
          type: string
          description: Public identifier of the UE (e.g., MSISDN, IMSI, etc.) with the product subscription.
          examples:
          - "960000001"
        type:
          type: string
          description: UE type with the product subscrition.
          examples:
          - MOBILE
          - FIXED
      externalDocs:
        description: GitHub - CommunicationProduct v1.15
        url: https://github.com/AlticeLabsProjects/ccp-common-models/blob/v1.15/src/main/java/com/alticelabs/ccp/common_models/types/CommunicationProduct.java

    Provisioning:
      type: object
      description: Provisioning information...
      required:
      - channel
      - subChannel
      - reason
      properties:
        channel:
          type: string
          description: >
            Channel system classification passed by parameter in the provision operation.
            <p>
            _Note:_ The value <u>is not validated</u>. The choice of how to use this is left to the provisioning external systems.
          examples:
          - Shop
        subChannel:
          type: string
          description: >
            Subchannel system classification passed by parameter in the provision operation.
            <p>
            _Note:_ The value <u>is not validated</u>. The choice of how to use this is left to the provisioning external systems.
          examples:
          - Web
        reason:
          type: object
          description: >
            Provisioning reason.
            <p>
            _Note:_ The value <u>is not</u> validated. The choice of how to use this is left to the provisioning external systems.
          required:
          - code
          properties:
            code:
              type: string
              description: Operation reason code.
              examples:
              - CLIENT
            description:
              type: string
              description: >
                Reason description (e.g., balance adjustment due to customer complaint, account).
              examples:
              - Customer request
        items:
          type: array
          description: Provisioned entities (e.g., _Account_, _Product_, _Top-level_).
          items:
            description: provisioning item
            type: object
            required:
            - operation
            - type
            properties:
              operation:
                type: string
                description: Provisioned operation.
                enum:
                - Create
                - Update
                - Remove
              entityType:
                type: string
                description: Provisioned entity type.
                enum:
                - Account
                - Product
                - ServicePolicy
                - AuthorizationPolicy
                - SessionPolicy
              entityId:
                type: string
                format: uuid
                description: External identifier of the entity.
              entity:
                type: object
                description: Representation of the entity result after its changes. On remove, this will contain only its identifier...?
                oneOf:
                - title: Account
                  description: >
                    `Account` entity representation.
                  properties:
                    productIds:
                      type: array
                      uniqueItems: true
                      description: Indentifiers of the products subscribed by the _Account_ (agreements).
                      items:
                        type: string
                    billingAccountId:
                      type: string
                    creationTs:
                      type: string
                      format: utcz
                    entries:
                      type: object
                      description: A map with additional information to describe this account.
                      additionalProperties:
                        type: string
                      examples:
                      - msisdn: "962222222"
                - title: Product
                  description: >
                    `Product` entity representation.
                  properties:
                    accountId:
                      type: string
                    creationTs:
                      type: string
                      format: utcz
                    parentProductId:
                      type: string
                    productOfferingSpecId:
                      type: string
                      description: The...
                    servicePolicyIds:
                      type: array
                      uniqueItems: true
                      items:
                        type: string
                    sessionPolicyIds:
                      type: array
                      uniqueItems: true
                      items:
                        type: string
                    communicationProducts:
                      type: array
                      items:
                        $ref: '#/components/schemas/CommunicationProduct'
                    entries:
                      type: object
                      description: A map with additional information to describe this product.
                      additionalProperties:
                        type: string
                      examples:
                      - name: agreement 123
                - title: Top-level
                  description: >
                    _Top-level_ representation. Conforms to all _Top-level_ entities: `AuthorizationPolicy`, `ServicePolicy`, and `SessionPolicy`.
                  properties:
                    specId:
                      type: string
                    accountId:
                      type: string
                    productId:
                      type: string
                    creationTs:
                      type: string
                      format: utcz
                    startTs:
                      type: string
                      format: utcz
                    endTs:
                      type: string
                      format: utcz
                    suspendedTs:
                      type: string
                      format: utcz
                    releaseTs:
                      type: string
                      format: utcz
                    adminStatus:
                      type: string
                    coexistenceRules:
                      type: object
                      properties:
                        excludedBy:
                          type: array
                          items:
                            type: string
                        excludes:
                          type: array
                          items:
                            type: string
                        onTopOf:
                          type: array
                          items:
                            type: string
                        onBottomOf:
                          type: array
                          items:
                            type: string
                    entries:
                      type: object
                      description: A map with the entries name from the _Top-level_ offer template as keys and the values prescribed??
                      additionalProperties:
                        type: string

    SMPolicyControl:
      type: object
      description: Service information associated with policy session (N7 and N28 reference points).
      required:
        - sessionPart
      properties:
        sessionPart:
          type: array
          description: >
            Portions of the policy session under the same policies.
            <p>
            _Note:_ The length of this array cannot be correlated to the `segmentNumber`, since an event update may not increase this number depending on the rules defined on OMS.
            <p>
            _Developer Note:_ Anytime a `SMPolicyRequest` event updates the LDR, a new entry is created in this list.
          minItems: 1
          items:
             $ref: '#/components/schemas/SessionPart'

    PolicyAuthorization:
      type: object
      description: Service information associated with authorization policy session (N5 reference point).
      properties:
        sessionPart:
          type: array
          description: >
            Portions of the authorization policy session under the same policies.
            <p>
            _Note:_ The length of this array cannot be correlated to the `segmentNumber`, since an event update may not increase this number depending on the rules defined on OMS.
            <p>
            _Developer Note:_ Anytime a `PolicyAuthorizationRequest` event updates the LDR, a new entry is created in this list.
          minItems: 1
          items:
             $ref: '#/components/schemas/AuthorizationSessionPart'

    SessionPart:
      type: object
      description: Portion of a policy session under the same policies.
      properties:
        partStartTs:
          type: string
          format: UTCZ
          description: Timestamp of the moment the policies update was processed.
        duration:
          type: number
          description: Duraction of this session portion in milliseconds.
        sessionPolicies:
          type: array
          description: >
            _Top-levels_ of _Session Policy_ type encountered and employed to handle the activity.
          items:
            $ref: '#/components/schemas/SessionPolicy'
        servicePolicies:
          type: array
          description: >
            _Top-levels_ of _Service Policy_ type encountered and employed to handle the activity.
          items:
            $ref: '#/components/schemas/ServicePolicy'
        appliedEligibility:
          $ref: '#/components/schemas/AppliedEligibility'
        appliedPCCRules:
          type: array
          description: Detailed information on the _PCC Rules_ applied during the sessions (e.g., periods of time when the session were on 4G or 5G).
          items:
            $ref: '#/components/schemas/AppliedPCCRule'
        appliedSessionRules:
          description: Detailed information on the session rules applied during the sessions (e.g., periods of time when the session were on 4G or 5G).
          type: array
          items:
            $ref: '#/components/schemas/AppliedSessionRule'
        policyCounters:
          type: array
          description: _Policy Counters_ used on the executed _Plans_.
          items:
            $ref: '#/components/schemas/PolicyCounter'
        ctg:
          type: object
          description: Contingency...
          properties:
            ctgDecision:
              type: string
              description: >
                Contingency decision: Contingency (`CTG`) or Central (`CNT`).
              enum:
                - CTG
                - CNT
            sessionClosureType:
              type: string
              description: >
                Session Closure Type.
              enum:
                - GRACIOUS
                - RAR
                - SILENT
                - SWITCHING
                - NONE
    AuthorizationSessionPart:
      description: Portion of a authorization policy session under the same policies.
      type: object
      properties:
        partStartTs:
          type: string
          format: UTCZ
          description: Timestamp of the moment the policies update was processed.
        duration:
          type: number
          description: Duraction of this session portion in milliseconds.
        authorizationPolicies:
          type: array
          description: >
            _Top-levels_ of _Policy Authorization_ type encountered and employed to handle the activity.
          items:
            $ref: '#/components/schemas/AuthorizationPolicy'
        appliedPCCRules:
          type: array
          items:
            $ref: '#/components/schemas/AppliedPCCRule'
          description: >
            Detailed information on the _PCC Rules_ applied during sessions
            (e.g., periods of time when the session were on 4G or 5G).
        appliedSessionRules:
          type: array
          items:
            $ref: '#/components/schemas/AppliedSessionRule'
          description: >
            Detailed information on session rules applied during sessions.
        smPolicySession:
          type: object
          description: >
            _Session Management Policy Decision_ object converted to JSON.
            Contains the SM policies authorized by the PCF.
            <p>
            _See Also_: [5G System; Session Management Policy Control Service; Stage 3 (TS 129 512 V17.12.0, subclause 5.6.2.4)](https://www.etsi.org/deliver/etsi_ts/129500_129599/129512/17.12.00_60/ts_129512v171200p.pdf#5.6.2.4%20Type%20SmPolicyDecision)
          externalDocs:
            description: GitHub - SmPolicyDecision v1.15
            url: https://github.com/AlticeLabsProjects/pcf-common-models/blob/v1.15/src/main/java/com/alticelabs/pcf/request/model/SmPolicyDecision.java


    AuthorizationPolicy:
      description: >
        Description of the _Top-level_ of _Policy Authorization_ type and the belonging _Plans_ that were executed to handle some activity.\

        _Authorization Policies_ are...
      type: object
      properties:
        id:
          type: string
          description: _Top-level_ identifier.
        specId:
          type: string
          description: _Top-level_ _Specification_ identifier.
        authorizationPlans:
          type: array
          description: Executed _Authorization Plans_ from the _Top-level_ _Specification_.
          items:
            $ref: '#/components/schemas/AuthorizationPlan'
        eligibilityPlans:
          type: array
          description: Executed _Eligibility Plans_ from the _Top-level_ _Specification_.
          items:
            $ref: '#/components/schemas/EligibilityPlan'
    ServicePolicy:
      type: object
      description: >
        Description of the _Top-level_ of _Service Policy_ type and the belonging _Plans_ that were executed to handle some activity.\

        _Service Policies_ act almost like _Session Policy_ modifiers...
      properties:
        id:
          type: string
          description: _Top-level_ unique identifier.
        specId:
          type: string
          description: _Top-level_ _Specification_ identifier.
        servicePlans:
          type: array
          description: Executed _Service Plans_ from the _Top-level_ _Specification_.
          items:
            $ref: '#/components/schemas/SessionPlan'
        notificationPlans:
          type: array
          description: Executed _Notification Plans_ from the _Top-level_ _Specification_.
          items:
            $ref: '#/components/schemas/NotificationPlan'
    SessionPolicy:
      type: object
      description: >
        Description of the _Top-level_ of _Session Policy_ type and the belonging _Plans_ that were executed to handle some activity.\

        _Session Policies_ are employed for LOCAL, ROAMING, VoLTE, and VoNR scenarios.
      properties:
        id:
          type: string
          description: _Top-level_ unique identifier.
        specId:
          type: string
          description: _Top-level_ _Specification_ identifier.
        eligibilityPlans:
          type: array
          description: Executed _Eligibility Plans_ from the _Top-level_ _Specification_.
          items:
            $ref: '#/components/schemas/EligibilityPlan'
        sessionPlans:
          type: array
          description: Executed _Session Plans_ from the _Top-level_ _Specification_.
          items:
            $ref: '#/components/schemas/SessionPlan'
        notificationPlans:
          type: array
          description: Executed _Notification Plans_ from the _Top-level_ _Specification_.
          items:
            $ref: '#/components/schemas/NotificationPlan'

    AuthorizationPlan:
      description: _Authorization Plan_...
      type: object
      properties:
        specId:
          type: string
          description: _Plan_ _Specification_ identifier.
        dimensions:
          type: array
          items:
            $ref: '#/components/schemas/Dimension'
        resultSpecId:
          type: string
          description: _Plan_ _Specification_ result identifier.
    EligibilityPlan:
      type: object
      description: _Eligibility Plan_...
      properties:
        specId:
          type: string
          description: _Plan_ _Specification_ identifier.
        dimensions:
          type: array
          items:
            $ref: '#/components/schemas/Dimension'
        resultSpecId:
          type: string
          description: _Plan_ _Specification_ result identifier.
    ServicePlan:
      type: object
      description: _Service Plan_...
      properties:
        specId:
          type: string
          description: _Specification_ identifier of the executed plan.
        dimensions:
          type: array
          items:
            $ref: '#/components/schemas/Dimension'
        resultSpecIds:
          type: array
          uniqueItems: true
          items:
            type: string
            description: _Plan_ _Specification_ result identifier.
    SessionPlan:
      type: object
      description: Session plan...
      properties:
        specId:
          type: string
          description: _Plan_ _Specification_ identifier.
        dimensions:
          type: array
          items:
            $ref: '#/components/schemas/Dimension'
        resultSpecIds:
          type: array
          uniqueItems: true
          items:
            type: string
            description: _Plan_ _Specification_ result identifier.
    NotificationPlan:
      type: object
      description: Notification plan...
      properties:
        specId:
          type: string
          description: _Specification_ identifier of the executed plan.
        resultSpecIds:
          type: array
          uniqueItems: true
          items:
            type: string
            description: _Plan_ _Specification_ result identifier.

    AppliedEligibility:
      type: object
      description: Applied eligibility...
      properties:
        result:
          type: boolean
          description: Eligibility status result (eligible or not).
        reason:
          type: string
          description: Eligibility reason.
          examples:
          - AUTHORIZED
    AppliedPCCRule:
      type: object
      description: _PCC Rules_ used. A _PCC Rule_ is a rule associated with policies to define the control of the service (e.g., charging 64Kbps).
      properties:
        specId:
          type: string
          description: Identifier of the applied _PCC Rule's Specification_.
    AppliedSessionRule:
      type: object
      description: ...
      properties:
        specId:
          type: string
          description: Identifier of the applied _Session Rule's Specification_.

    Dimension:
      type: object
      description: ...
      properties:
        name:
          type: string
          description: Friendly name to identify the _Dimension_ in diagnostic situations.
        result:
          description: Result of the _Dimension_ execution used on a _Rule_ evaluation.

    PolicyCounter:
      type: object
      description: A _Policy Counter_ is used to store any number relevant to the business (e.g., the number of Octets spent by the subscriber on a specific service).
      properties:
        id:
          type: string
          description: _Policy Counter_ identifier.
        value:
          type: string
          description: _Policy Counter_ value.
      examples:
      - id: balance-123
        value: Low

    Notification:
      type: object
      description: Contents of a _Notification_ (e.g. SMS, email) along with the _Top-level_'s _Plan_ that activated the notication sending.
      required:
        - subject
      properties:
        id:
          type: string
          description: Unique identifier for the notification.
        channel:
          type: string
          description: Channel through which the notification is sent.
          examples:
          - SMS
          - EMAIL
        originator:
          type: string
          description: Originator address for the notification (email or phone number/large account).
          examples:
          - "103..."
        destinations:
          type: array
          items:
            type: string
          description: Destination addresses for the _Notification_ (emails or phone numbers).
          examples:
          - "961234567"
        subject:
          type: string
          description: Subject of the _Notification_. <u>Only applicable</u> for email _Notifications_.
        message:
          type: string
          description: Content of the _Notification_ message.
          examples:
          - Insufficient balance. Please recharge. Thanks.
        publishTs:
          type: string
          format: utcz
          description: Timestamp when the _Notification_ was published.
        validityTs:
          type: string
          format: utcz
          description: Timestamp indicating the validity of the _Notification_ message.
        dispatchPeriods:
          type: array
          description: Periods during which the _Notification_ can be dispatched.
          minItems: 1
          items:
            type: object
            properties:
              startTs:
                type: string
                format: UTCZ
                description: Start timestamp of the dispatch period.
              endTs:
                type: string
                format: UTCZ
                description: End timestamp of the dispatch period.
        ntfTopLevelSpecId:
          type: string
          description: Identifier of the _Top-level Specification_.
        ntfTopLevelSpecVersion:
          type: string
          description: Version of the _Top-level Specification_.
        ntfPlanSpecId:
          type: string
          description: Identifier of the _Plan Specification_.
        ntfPlanSpecVersion:
          type: string
          description: Version of the _Plan Specification_.
        ntfResultSpecId:
          type: string
          description: Identifier of the _Result Specification_.
        ntfResultSpecVersion:
          type: string
          description: Version of the _Result Specification_.